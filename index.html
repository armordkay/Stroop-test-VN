<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Stroop Test Ti·∫øng Vi·ªát</title>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;600;800;900&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --red:    #E63946;
    --blue:   #2196F3;
    --purple: #9C27B0;
    --yellow: #F9A825;
    --bg:     #0f0f14;
    --surface: #1a1a24;
    --border: #2a2a3a;
    --text:   #f0f0f0;
  }

  body {
    font-family: 'Lexend', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  /* animated background dots */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      radial-gradient(circle at 20% 20%, rgba(230,57,70,.08) 0%, transparent 50%),
      radial-gradient(circle at 80% 80%, rgba(33,150,243,.08) 0%, transparent 50%),
      radial-gradient(circle at 50% 50%, rgba(156,39,176,.06) 0%, transparent 60%);
    pointer-events: none;
    z-index: 0;
  }

  .container {
    position: relative;
    z-index: 1;
    width: min(500px, 95vw);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 28px;
  }

  /* ---- Header ---- */
  .header {
    text-align: center;
  }
  .header h1 {
    font-size: clamp(1.1rem, 4vw, 1.4rem);
    font-weight: 800;
    letter-spacing: .15em;
    text-transform: uppercase;
    color: #888;
  }
  .header p {
    font-size: .8rem;
    color: #555;
    margin-top: 4px;
    letter-spacing: .05em;
  }

  /* ---- HUD bar ---- */
  .hud {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 12px 24px;
  }
  .hud-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
  }
  .hud-label {
    font-size: .65rem;
    font-weight: 600;
    letter-spacing: .12em;
    text-transform: uppercase;
    color: #555;
  }
  .hud-value {
    font-size: 1.6rem;
    font-weight: 900;
    color: #f0f0f0;
    font-variant-numeric: tabular-nums;
    transition: color .2s;
  }
  #timer-val.warning { color: var(--red); animation: pulse .5s infinite; }
  @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.5} }

  /* timer bar */
  .timer-bar-wrap {
    width: 100%;
    height: 4px;
    background: var(--border);
    border-radius: 99px;
    overflow: hidden;
  }
  .timer-bar {
    height: 100%;
    width: 100%;
    background: linear-gradient(90deg, var(--red), var(--purple), var(--blue));
    border-radius: 99px;
    transform-origin: left;
    transition: transform 1s linear;
  }

  /* ---- Word card ---- */
  .word-card {
    width: 100%;
    height: 160px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
  }
  .word-card::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at center, rgba(255,255,255,.02) 0%, transparent 70%);
    pointer-events: none;
  }

  #word {
    font-size: clamp(3rem, 14vw, 4.5rem);
    font-weight: 900;
    letter-spacing: .04em;
    text-shadow: 0 0 40px currentColor;
    transition: opacity .12s, transform .12s;
    user-select: none;
  }
  #word.flash {
    opacity: 0;
    transform: scale(.9);
  }

  /* instruction */
  .instruction {
    font-size: .75rem;
    color: #444;
    letter-spacing: .1em;
    text-transform: uppercase;
    font-weight: 600;
  }

  /* ---- Answer buttons ---- */
  .buttons {
    width: 100%;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
  .btn {
    padding: 18px 10px;
    font-family: 'Lexend', sans-serif;
    font-size: 1.15rem;
    font-weight: 800;
    letter-spacing: .06em;
    text-transform: uppercase;
    cursor: pointer;
    border: 2px solid var(--border);
    border-radius: 14px;
    background: #fff;
    color: #111;
    transition: transform .1s, box-shadow .15s, border-color .15s;
    position: relative;
    overflow: hidden;
    user-select: none;
  }
  .btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: currentColor;
    opacity: 0;
    transition: opacity .15s;
  }
  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0,0,0,.35);
    border-color: #444;
  }
  .btn:active { transform: scale(.96); }

  /* feedback flash on button */
  .btn.correct {
    animation: btnCorrect .3s ease forwards;
  }
  .btn.wrong {
    animation: btnWrong .3s ease forwards;
  }
  @keyframes btnCorrect {
    0%  { background: #fff; }
    40% { background: #b9f6ca; border-color: #69f0ae; }
    100%{ background: #fff; }
  }
  @keyframes btnWrong {
    0%  { background: #fff; }
    40% { background: #ffcdd2; border-color: #ff5252; }
    100%{ background: #fff; }
  }



  /* ---- Streak ---- */
  .streak-bar {
    display: flex;
    gap: 6px;
    align-items: center;
  }
  .streak-dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--border);
    transition: background .2s, transform .2s;
  }
  .streak-dot.active { background: #ffd600; transform: scale(1.3); }

  /* ---- Result overlay ---- */
  .overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.85);
    backdrop-filter: blur(8px);
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity .35s;
  }
  .overlay.show {
    opacity: 1;
    pointer-events: all;
  }
  .result-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 24px;
    padding: 48px 40px;
    text-align: center;
    max-width: 360px;
    width: 90%;
    transform: translateY(20px);
    transition: transform .35s;
  }
  .overlay.show .result-card { transform: translateY(0); }
  .result-card h2 {
    font-size: 1rem;
    letter-spacing: .2em;
    text-transform: uppercase;
    color: #555;
    margin-bottom: 12px;
  }
  .result-score {
    font-size: 5rem;
    font-weight: 900;
    line-height: 1;
    background: linear-gradient(135deg, var(--red), var(--purple), var(--blue));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .result-label {
    font-size: .85rem;
    color: #555;
    margin-top: 6px;
    letter-spacing: .08em;
  }
  .result-rank {
    font-size: 1.6rem;
    font-weight: 800;
    margin: 20px 0 28px;
    color: #ffd600;
  }
  .restart-btn {
    padding: 14px 40px;
    background: linear-gradient(135deg, var(--red), var(--purple));
    color: #fff;
    font-family: 'Lexend', sans-serif;
    font-size: 1rem;
    font-weight: 800;
    letter-spacing: .1em;
    text-transform: uppercase;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: transform .15s, box-shadow .15s;
  }
  .restart-btn:hover { transform: scale(1.05); box-shadow: 0 8px 30px rgba(230,57,70,.4); }
  .restart-btn:active { transform: scale(.97); }
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>Stroop Test</h1>
    <p>Ch·ªçn M√ÄU S·∫ÆC c·ªßa ch·ªØ, kh√¥ng ph·∫£i n·ªôi dung ch·ªØ</p>
  </div>

  <div class="hud">
    <div class="hud-item">
      <span class="hud-label">ƒêi·ªÉm</span>
      <span class="hud-value" id="score-val">0</span>
    </div>
    <div class="hud-item">
      <span class="hud-label">Th·ªùi gian</span>
      <span class="hud-value" id="timer-val">60</span>
    </div>
    <div class="hud-item">
      <span class="hud-label">Sai</span>
      <span class="hud-value" id="wrong-val" style="color:#E63946">0</span>
    </div>
  </div>

  <div class="timer-bar-wrap">
    <div class="timer-bar" id="timer-bar"></div>
  </div>

  <div class="word-card">
    <div id="word">ƒê·ªé</div>
  </div>

  <p class="instruction">‚Üì M√†u s·∫Øc c·ªßa ch·ªØ l√† g√¨? ‚Üì</p>

  <div class="streak-bar" id="streak-bar">
    <span style="font-size:.65rem;color:#444;letter-spacing:.1em;text-transform:uppercase;font-weight:600;margin-right:4px;">Chu·ªói</span>
    <!-- dots injected by JS -->
  </div>

  <div class="buttons" id="buttons"></div>
</div>

<!-- result overlay -->
<div class="overlay" id="overlay">
  <div class="result-card">
    <h2>K·∫øt qu·∫£</h2>
    <div class="result-score" id="final-score">0</div>
    <div class="result-label">ƒëi·ªÉm</div>
    <div class="result-rank" id="final-rank">üéØ</div>
    <button class="restart-btn" onclick="restartGame()">Ch∆°i l·∫°i</button>
  </div>
</div>

<script>
  const COLORS = ["ƒê·ªé", "XANH", "T√çM", "V√ÄNG"];
  const COLOR_MAP = {
    "ƒê·ªé":   "#E63946",
    "XANH": "#2196F3",
    "T√çM":  "#9C27B0",
    "V√ÄNG": "#F9A825"
  };
  const DURATION = 60;

  let currentColorName = "";
  let score = 0;
  let wrongCount = 0;
  let streak = 0;
  let timeLeft = DURATION;
  let interval = null;
  let gameActive = false;

  const wordDiv     = document.getElementById("word");
  const scoreVal    = document.getElementById("score-val");
  const wrongVal    = document.getElementById("wrong-val");
  const timerVal    = document.getElementById("timer-val");
  const timerBar    = document.getElementById("timer-bar");
  const buttonsDiv  = document.getElementById("buttons");
  const overlay     = document.getElementById("overlay");
  const finalScore  = document.getElementById("final-score");
  const finalRank   = document.getElementById("final-rank");
  const streakBar   = document.getElementById("streak-bar");

  /* ---- streak dots ---- */
  const MAX_STREAK = 5;
  const dots = [];
  for (let i = 0; i < MAX_STREAK; i++) {
    const d = document.createElement("div");
    d.className = "streak-dot";
    streakBar.appendChild(d);
    dots.push(d);
  }
  function updateStreakDots() {
    dots.forEach((d, i) => {
      d.classList.toggle("active", i < Math.min(streak, MAX_STREAK));
    });
  }

  /* ---- Create buttons once ---- */
  function createButtons() {
    buttonsDiv.innerHTML = "";
    COLORS.forEach(colorName => {
      const btn = document.createElement("button");
      btn.className = "btn";
      btn.textContent = colorName;
      btn.dataset.color = colorName;
      btn.onclick = () => checkAnswer(colorName, btn);
      buttonsDiv.appendChild(btn);
    });
  }

  /* ---- New round ---- */
  function newRound() {
    // pick random word and random ink color (can differ)
    const randomWord  = COLORS[Math.floor(Math.random() * COLORS.length)];
    let   randomColor = COLORS[Math.floor(Math.random() * COLORS.length)];
    // make congruent rounds ~25% only (force incongruent most of the time)
    // just random is fine; no forced logic needed
    wordDiv.classList.add("flash");
    setTimeout(() => {
      wordDiv.textContent = randomWord;
      wordDiv.style.color = COLOR_MAP[randomColor];
      currentColorName = randomColor;
      wordDiv.classList.remove("flash");
    }, 120);
  }

  /* ---- Check answer ---- */
  function checkAnswer(answer, btn) {
    if (!gameActive) return;
    const correct = answer === currentColorName;
    if (correct) {
      score++;
      streak++;
      scoreVal.textContent = score;
      btn.classList.remove("correct", "wrong");
      void btn.offsetWidth; // reflow
      btn.classList.add("correct");
    } else {
      wrongCount++;
      streak = 0;
      wrongVal.textContent = wrongCount;
      btn.classList.remove("correct", "wrong");
      void btn.offsetWidth;
      btn.classList.add("wrong");
    }
    updateStreakDots();
    newRound();
  }

  /* ---- Timer ---- */
  function startTimer() {
    interval = setInterval(() => {
      timeLeft--;
      timerVal.textContent = timeLeft;
      timerBar.style.transform = `scaleX(${timeLeft / DURATION})`;
      if (timeLeft <= 10) timerVal.classList.add("warning");
      if (timeLeft <= 0) endGame();
    }, 1000);
  }

  /* ---- End game ---- */
  function endGame() {
    clearInterval(interval);
    gameActive = false;
    finalScore.textContent = score;
    // rank
    let rank = "";
    if      (score >= 50) rank = "üèÜ Thi√™n t√†i!";
    else if (score >= 40) rank = "‚ö° Xu·∫•t s·∫Øc!";
    else if (score >= 30) rank = "üåü R·∫•t t·ªët!";
    else if (score >= 20) rank = "üëç Kh√° t·ªët!";
    else if (score >= 10) rank = "üí™ C·ªë l√™n!";
    else                  rank = "üî• Luy·ªán th√™m nh√©!";
    finalRank.textContent = rank;
    overlay.classList.add("show");
  }

  /* ---- Restart ---- */
  function restartGame() {
    overlay.classList.remove("show");
    score = 0; wrongCount = 0; streak = 0; timeLeft = DURATION;
    scoreVal.textContent  = "0";
    wrongVal.textContent  = "0";
    timerVal.textContent  = DURATION;
    timerVal.classList.remove("warning");
    timerBar.style.transform = "scaleX(1)";
    updateStreakDots();
    clearInterval(interval);
    gameActive = true;
    newRound();
    startTimer();
  }

  /* ---- Init ---- */
  createButtons();
  gameActive = true;
  newRound();
  startTimer();
</script>
</body>
</html>